<h3 id="1-경로-탐색-단계-rreq"><strong>1. 경로 탐색 단계 (RREQ)</strong></h3>
<p>송신 노드가 특정 수신 노드로 가는 경로를 모를 때, <code>RREQ(Route Request)</code> 패킷을 <strong>브로드캐스트</strong>하여 경로 탐색을 시작합니다. 브로드캐스트된 <code>RREQ</code>를 받은 이웃 노드들은 해당 패킷을 다시 주변 노드들에게 브로드캐스트하는 과정을 반복합니다. </p>
<ul>
<li><strong>보완</strong>: 이 과정에서 <code>RREQ</code>를 수신한 모든 중간 노드는 패킷에 담긴 <strong>출발지 정보를 자신의 라우팅 테이블에 기록</strong>하여, 나중에 경로 응답을 보낼 때 사용할 <strong>역방향 경로(Reverse Path)</strong>를 구축합니다.</li>
</ul>
<hr />
<h3 id="2-경로-응답-및-선택-단계-rrep"><strong>2. 경로 응답 및 선택 단계 (RREP)</strong></h3>
<p><code>RREQ</code> 패킷이 목적지 노드나 목적지로 가는 유효한 경로를 이미 알고 있는 중간 노드에 도착하면, 해당 노드는 <code>RREP(Route Reply)</code> 패킷을 생성하여 <code>RREQ</code>가 왔던 <strong>역방향 경로</strong>를 따라 출발지로 <strong>유니캐스트</strong>합니다. </p>
<ul>
<li><strong>보완</strong>: 출발지 노드는 여러 개의 <code>RREP</code>를 받을 수 있으며, 이 중에서 <strong>가장 최신(시퀀스 번호)이면서 가장 효율적인(최소 홉 수)</strong> 경로 하나를 최종적으로 선택하여 라우팅 테이블에 등록합니다.</li>
</ul>
<hr />
<h3 id="3-경로-유지-및-오류-처리-단계-hello--rerr"><strong>3. 경로 유지 및 오류 처리 단계 (Hello &amp; RERR)</strong></h3>
<p>데이터 통신이 시작된 후에도, 노드들은 <strong>헬로 메시지</strong>를 주기적으로 주고받으며 이웃 노드의 생존 여부를 확인합니다.</p>
<ul>
<li><strong>보완</strong>: 헬로 메시지를 일정 시간 동안 받지 못한 노드는 해당 이웃 노드와의 링크가 끊겼다고 판단합니다. 이 경우, 해당 노드는 <code>RERR(Route Error)</code> 패킷을 생성하여 <strong>해당 링크가 포함된 모든 경로를 폐기</strong>하고, 해당 경로를 사용하던 다른 노드들에게 이 사실을 알립니다. 이로써 네트워크는 끊어진 경로를 더 이상 사용하지 않게 됩니다.</li>
</ul>
<h3 id="정리"><strong>정리</strong></h3>
<p>AODV는 <strong>요청 기반(on-demand)</strong> 프로토콜로서, 경로 탐색(RREQ)과 응답(RREP)을 통해 경로를 동적으로 구축하고, 헬로 메시지와 <code>RERR</code>를 통해 경로의 유효성을 관리하는 메커니즘을 사용합니다. 이 과정을 통해 네트워크 환경 변화에 효율적으로 대응하며 안정적인 통신을 유지합니다.</p>
<hr />
<h3 id="포워딩이란">포워딩이란?</h3>
<p>포워딩(forwarding)은 네트워크에서 데이터 패킷을 <strong>한 노드에서 다음 노드로 전달</strong>하는 과정입니다. 패킷이 최종 목적지에 도달할 때까지 여러 노드를 거치게 되는데, 각 노드에서 이루어지는 이 전달 행위가 바로 포워딩입니다. 이는 전체 라우팅(routing) 과정의 핵심적인 부분입니다.</p>
<hr />
<h3 id="포워딩의-동작-원리">포워딩의 동작 원리</h3>
<p>포워딩은 주로 다음과 같은 단계로 이루어집니다.</p>
<ol>
<li><strong>패킷 수신</strong>: 노드가 네트워크 인터페이스를 통해 패킷을 받습니다.</li>
<li><strong>헤더 분석</strong>: 패킷의 헤더(header)에 있는 <strong>목적지 주소</strong>를 확인합니다.</li>
<li><strong>경로 검색</strong>: 노드는 자신의 <strong>라우팅 테이블(routing table)</strong>에서 해당 목적지 주소로 가는 경로를 찾습니다. 라우팅 테이블은 목적지까지 가기 위한 최적의 '다음 홉(next hop)' 정보를 저장하고 있습니다. </li>
<li><strong>패킷 전송</strong>: 라우팅 테이블에서 찾은 다음 홉으로 패킷을 보냅니다. 이때 패킷의 TTL(Time-to-Live) 값은 1 감소합니다.</li>
</ol>
<p>이러한 과정은 패킷이 최종 목적지에 도착하거나, TTL이 0이 되어 폐기될 때까지 반복됩니다.</p>
<h3 id="라우팅과-포워딩의-차이점">라우팅과 포워딩의 차이점</h3>
<ul>
<li><strong>라우팅(Routing)</strong>: 네트워크의 전체적인 구조를 파악하고, 목적지까지의 <strong>최적 경로를 결정</strong>하는 과정입니다. 예를 들어, AODV에서는 RREQ와 RREP 메시지를 주고받으며 라우팅 테이블을 만드는 것이 라우팅입니다.</li>
<li><strong>포워딩(Forwarding)</strong>: 라우팅을 통해 결정된 경로를 따라 패킷을 <strong>실제로 전달</strong>하는 행위입니다. AODV에서는 라우팅 테이블에 경로가 생긴 후 데이터 패킷을 다음 홉으로 보내는 것이 포워딩입니다.</li>
</ul>
<p>간단히 말해, <strong>라우팅은 '길 찾기'이고, 포워딩은 '길을 따라 이동하기'</strong>라고 할 수 있습니다.</p>
<p>드론간의 AODV통신 즉FANET환경에서 성능을 개선해야할점은 1. 링크 품질 지표 (Link Quality Metric)
적용: 홉 수(hop count) 대신 링크의 안정성을 주요 기준으로 사용해야 합니다. 홉 수는 짧지만 불안정한 링크보다, 홉 수가 길더라도 안정적인 링크가 전체 네트워크 성능에 더 유리할 수 있습니다.</p>
<p>조정할 값: 수신 신호 강도(RSSI), 신호 대 잡음비(SNR), 또는 패킷 손실률 등을 고려하여 경로를 선택하도록 AODV 프로토콜을 수정해야 합니다. RREP 패킷에 이러한 링크 품질 정보를 추가하고, 출발지 노드가 이를 바탕으로 최적 경로를 결정하도록 합니다.</p>
<ol start="2">
<li>노드 잔여 에너지 지표 (Node Residual Energy Metric)
적용: 배터리 수명이 중요한 드론의 경우, 에너지가 부족한 노드를 통과하는 경로를 피해야 합니다. 에너지가 고갈되면 노드가 네트워크에서 이탈하여 경로가 끊어지기 때문입니다.</li>
</ol>
<p>조정할 값: RREP 패킷에 노드의 잔여 배터리량을 포함시켜, 에너지가 더 많이 남은 노드를 통과하는 경로를 우선적으로 선택하도록 합니다. 이는 네트워크 전체의 수명을 연장하는 데 도움이 됩니다.</p>
<ol start="3">
<li>지연 시간 지표 (Latency Metric)
적용: 드론 간 통신은 실시간성이 중요한 경우가 많습니다. 따라서 단순히 홉 수가 적은 경로보다, 전체 경로의 지연 시간이 가장 짧은 경로를 선택해야 합니다.</li>
</ol>
<p>조정할 값: RREP 패킷에 경로 응답에 걸린 시간(왕복 지연 시간의 추정치)을 포함시켜, 이를 바탕으로 최적 경로를 결정하도록 합니다.</p>
<p>이러한 메트릭들을 단독으로 사용하기보다는, 사용자가 언급한 LEQ-AODV처럼 가중치를 부여한 복합 메트릭을 사용하는 것이 가장 효과적입니다. 예를 들어, w1 * 링크품질 + w2 * 잔여에너지와 같은 공식을 사용해 상황에 맞는 최적의 경로를 동적으로 선택하도록 구현할 수 있습니다</p>