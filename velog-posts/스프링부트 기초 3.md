<hr />
<h2 id="웹-페이지-개발의-핵심-뷰-템플릿과-mvc-패턴">웹 페이지 개발의 핵심: 뷰 템플릿과 MVC 패턴</h2>
<p>웹 페이지를 만들 때, 모든 페이지를 처음부터 일일이 코딩하는 건 비효율적이다. 이때 <strong>뷰 템플릿</strong>과 <strong>MVC (Model-View-Controller) 패턴</strong>이 유용하다.</p>
<blockquote>
<p><strong>뷰 템플릿:</strong> 화면을 담당하는 기술이다. 틀이 되는 페이지(템플릿)를 만들고, 이 템플릿에 <strong>변수값만 바꿔 넣어 수많은 페이지로 변환</strong>하여 사용한다.</p>
</blockquote>
<blockquote>
<p><strong>MVC 패턴:</strong> 소프트웨어 디자인 패턴 중 하나로, 애플리케이션의 역할을 세 가지 부분으로 나눈다:</p>
<ul>
<li><strong>M (Model):</strong> 데이터와 비즈니스 로직을 관리한다.</li>
<li><strong>V (View):</strong> 사용자에게 보여지는 화면(UI)을 담당한다. 뷰 템플릿이 여기에 해당한다.</li>
<li><strong>C (Controller):</strong> 사용자의 요청을 처리하고, Model과 View를 연결하는 다리 역할을 한다.</li>
</ul>
</blockquote>
<hr />
<h3 id="mustache란-무엇인가">Mustache란 무엇인가?</h3>
<p><code>Mustache</code>는 <code>View Template</code>의 한 종류다. 즉, <strong>화면을 동적으로 생성하는 데 사용되는 기술</strong>이다. Mustache는 논리(로직)가 거의 없는 &quot;로직리스(logic-less)&quot; 템플릿 엔진으로 유명하다. 이는 템플릿이 데이터 표시 역할에만 집중하고, 복잡한 연산이나 조건문 같은 로직은 컨트롤러에서 처리하도록 유도한다.</p>
<hr />
<h3 id="실습-스프링-부트에서-뷰-템플릿mustache과-mvc-패턴-활용하기">실습: 스프링 부트에서 뷰 템플릿(Mustache)과 MVC 패턴 활용하기</h3>
<p>이전에 설정한 스프링 부트 프로젝트를 활용하여, 클라이언트의 요청에 따라 동적인 웹 페이지를 응답하는 과정을 실습해 보자.</p>
<h4 id="1-뷰-템플릿-파일mustache-생성-및-플러그인-설치">1. 뷰 템플릿 파일(.mustache) 생성 및 플러그인 설치</h4>
<p>먼저, 클라이언트에게 보여줄 화면인 뷰 템플릿 파일을 생성한다.</p>
<ul>
<li><p><code>src/main/resources/templates</code> 경로에 새로운 파일을 생성하고, 파일 이름을 **<code>greetings.mustache</code>**로 지정한다.</p>
<pre><code class="language-html">&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;{{username}}님, 반갑습니다&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<blockquote>
<p><strong>참고:</strong> 위 코드에서 <code>{{username}}</code>은 Mustache 문법으로, <strong>컨트롤러에서 전달받을 변수</strong>를 의미한다. 이 변수에 데이터가 채워져 동적인 페이지가 완성된다.</p>
</blockquote>
</li>
<li><p><strong>Mustache 플러그인 설치:</strong> IntelliJ IDEA에서 <code>.mustache</code> 파일을 제대로 인식하고 문법 강조 등의 기능을 사용하려면 플러그인을 설치해야 한다.</p>
<ol>
<li>IntelliJ IDEA에서 <code>Help</code> → <code>Find Action</code> (또는 <code>Ctrl + Shift + A</code> / <code>Cmd + Shift + A</code>)을 클릭한다.</li>
<li>검색창에 <code>plugins</code>를 입력하고 엔터를 눌러 플러그인 설정 창을 연다.</li>
<li><code>Marketplace</code> 탭에서 <code>mustache</code>를 검색한 후, <code>Install</code> 버튼을 클릭하여 설치한다. 설치 후 IntelliJ IDEA를 재시작해야 할 수 있다.</li>
</ol>
</li>
<li><p><strong>기본 HTML 구조 자동 완성:</strong> <code>.mustache</code> 파일 내에서 <code>doc</code>를 입력하고 <code>Tab</code> 키를 누르면 기본적인 HTML 문서 구조를 자동으로 불러올 수 있다.</p>
</li>
</ul>
<h4 id="2-controller-만들기">2. Controller 만들기</h4>
<p>이제 클라이언트의 요청을 받아 뷰 템플릿과 데이터를 연결해 줄 <strong>컨트롤러</strong>를 생성한다.</p>
<ul>
<li><p><code>src/main/java/com.example.firstproject</code> 경로에 새로운 <strong><code>package</code>를 생성</strong>한다. 패키지 이름은 일반적으로 <code>controller</code>로 지정한다.</p>
</li>
<li><p><code>controller</code> 패키지 안에 새로운 자바 <strong>클래스를 생성</strong>한다. 클래스 이름은 **<code>FirstController</code>**와 같이 <code>[파일명]Controller</code> 형태로 짓는 것이 관례다.</p>
<pre><code class="language-java">// src/main/java/com/example/firstProject/controller/FirstController.java
package com.example.firstProject.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class FirstController {
    @GetMapping(&quot;/hi&quot;)
    public String niceToMeetYou(Model model ) {
        model.addAttribute( &quot;username&quot;, &quot;우테코&quot; );
        return &quot;greetings&quot;; // templates/greetings.mustache 파일을 브라우저로 전송
    }
}</code></pre>
</li>
<li><p><strong>코드 설명:</strong></p>
<ul>
<li><code>@Controller</code>: 이 클래스가 스프링 MVC의 컨트롤러 역할을 수행함을 선언하는 어노테이션이다. 이를 통해 스프링이 해당 클래스를 자동으로 탐지하고 관리한다. (자동으로 <code>import</code>된다)</li>
<li><code>@GetMapping(&quot;/hi&quot;)</code>: 웹 브라우저에서 <code>/hi</code>라는 <strong>URL로 GET 요청이 들어오면</strong> <code>niceToMeetYou</code> 메서드를 실행하도록 연결하는 어노테이션이다.</li>
<li><code>public String niceToMeetYou(Model model)</code>: 이 메서드는 <code>String</code> 타입의 반환값을 가진다. 이때 반환되는 문자열(<code>&quot;greetings&quot;</code>)은 <strong><code>src/main/resources/templates</code> 폴더 내의 <code>greetings.mustache</code> 파일을 클라이언트에게 보여주라는 의미</strong>다.</li>
<li><code>Model model</code>: 스프링이 제공하는 <code>Model</code> 객체를 매개변수로 받는다. 이 <code>Model</code> 객체는 <strong>컨트롤러에서 뷰 템플릿으로 데이터를 전달</strong>하는 데 사용된다. <code>import org.springframework.ui.Model;</code>을 선택하여 임포트한다.</li>
</ul>
</li>
</ul>
<h4 id="3-model-사용하기-데이터-전달">3. Model 사용하기 (데이터 전달)</h4>
<p>뷰 템플릿(<code>greetings.mustache</code>)에 설정한 <code>{{username}}</code> 변수에 실제 데이터를 넣어주려면, 컨트롤러에서 <code>Model</code> 객체를 사용해야 한다.</p>
<ul>
<li><p><strong>컨트롤러 코드:</strong></p>
<pre><code class="language-java">// FirstController.java (일부 발췌)
@GetMapping(&quot;/hi&quot;)
public String niceToMeetYou(Model model ) { // Model 객체를 매개변수로 받음
    model.addAttribute( &quot;username&quot;, &quot;우테코&quot; ); // &quot;username&quot; 변수에 &quot;우테코&quot; 데이터 추가
    return &quot;greetings&quot;;
}</code></pre>
</li>
<li><p><code>model.addAttribute(&quot;변수 이름&quot;, &quot;데이터 값&quot;);</code></p>
<ul>
<li><code>model.addAttribute(&quot;username&quot;, &quot;우테코&quot;);</code>는 <code>&quot;우테코&quot;</code>라는 <strong>데이터 값</strong>을 <code>&quot;username&quot;</code>이라는 <strong>변수 이름</strong>으로 <code>Model</code> 객체에 담는 코드다.</li>
<li>이렇게 <code>Model</code> 객체에 담긴 데이터는 <code>greetings.mustache</code> 파일로 전달되어 <code>{{username}}</code> 위치에 <code>&quot;우테코&quot;</code>라는 값이 채워진다.</li>
</ul>
</li>
</ul>
<hr />
<h3 id="웹-페이지-실행-결과">웹 페이지 실행 결과</h3>
<p>스프링 부트 애플리케이션을 실행하고 웹 브라우저에서 <code>http://localhost:8080/hi</code> 주소로 접속하면 다음과 같은 웹 페이지를 볼 수 있다.</p>
<p><strong>웹 페이지 이미지 (예상):</strong></p>
<pre><code>+------------------------------------------+
|  (브라우저 상단 주소창: http://localhost:8080/hi)  |
|                                          |
|  ------------------------------------    |
|  |    우테코님, 반갑습니다!             |  &lt;- h1 태그의 내용
|  ------------------------------------    |
|                                          |
+------------------------------------------+</code></pre><hr />
<h3 id="뷰-템플릿-페이지-출력까지-mvc의-역할과-실행-흐름">뷰 템플릿 페이지 출력까지 MVC의 역할과 실행 흐름</h3>
<p><strong>스프링 부트가 웹 서버 역할을 할 수 있는 가장 큰 이유 중 하나는 MVC 패턴의 유기적인 상호작용 때문이다.</strong> 웹 페이지가 클라이언트에게 출력되기까지 MVC 각 요소의 역할과 흐름은 다음과 같다:</p>
<ol>
<li><p><strong>클라이언트의 요청:</strong></p>
<ul>
<li>웹 브라우저(클라이언트)가 <code>http://localhost:8080/hi</code>와 같은 URL로 **요청(Request)**을 서버에 보낸다.</li>
</ul>
</li>
<li><p><strong>Controller의 요청 처리:</strong></p>
<ul>
<li>스프링 부트 애플리케이션 내의 <strong>Controller</strong>가 클라이언트로부터 이 요청을 받는다.</li>
<li><code>@GetMapping(&quot;/hi&quot;)</code> 어노테이션이 붙은 <code>niceToMeetYou()</code> 메서드가 이 요청을 처리하도록 연결된다.</li>
<li>컨트롤러는 단순히 요청을 받는 것뿐만 아니라, <strong>Model</strong>을 사용하여 뷰(View)에 필요한 데이터를 준비한다.<ul>
<li>예시 코드에서 <code>model.addAttribute(&quot;username&quot;, &quot;우테코&quot;);</code>는 &quot;우테코&quot;라는 데이터를 <code>username</code>이라는 이름으로 Model에 추가한다. 이는 <strong>뷰에 전달될 데이터</strong>를 정의하는 과정이다.</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>View의 페이지 생성:</strong></p>
<ul>
<li>컨트롤러 메서드(<code>niceToMeetYou()</code>)의 <code>return &quot;greetings&quot;;</code>는 스프링에게 &quot;이제 <code>greetings.mustache</code>라는 뷰 템플릿을 사용하여 페이지를 만들고 클라이언트에게 응답하라&quot;고 지시한다.</li>
<li>스프링은 <code>src/main/resources/templates/greetings.mustache</code> 파일을 찾아 실행한다. 이때 컨트롤러가 Model에 담아 보낸 데이터(<code>username: &quot;우테코&quot;</code>)가 뷰 템플릿으로 전달된다.</li>
<li>Mustache 템플릿 엔진은 <code>greetings.mustache</code> 파일 내의 <code>{{username}}</code> 부분을 전달받은 <code>&quot;우테코&quot;</code> 값으로 대체하여 최종적인 HTML 페이지를 완성한다.</li>
</ul>
</li>
<li><p><strong>클라이언트로 응답:</strong></p>
<ul>
<li>완성된 HTML 페이지는 **응답(Response)**의 형태로 다시 클라이언트(웹 브라우저)로 전송된다.</li>
<li>브라우저는 이 HTML을 해석하여 최종 웹 페이지를 사용자에게 보여준다.</li>
</ul>
</li>
</ol>
<p>이처럼 <strong>Controller는 Client로부터 요청을 받고, View는 페이지를 만들며, Model은 페이지에 쓰일 데이터들을 전달해 주는 역할</strong>을 유기적으로 수행함으로써 스프링 부트가 웹 서버 역할을 해낸다.</p>
<p>(<a href="https://velog.velcdn.com/images/kdhun-0814/post/e9966752-6fcf-4d53-8c73-3655870c2078/image.png">https://velog.velcdn.com/images/kdhun-0814/post/e9966752-6fcf-4d53-8c73-3655870c2078/image.png</a>)</p>