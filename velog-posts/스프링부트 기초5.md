<hr />
<h2 id="사용자로부터-폼-데이터-받기-crud와-dto">사용자로부터 폼 데이터 받기: CRUD와 DTO</h2>
<p>웹 서비스의 핵심 기능 중 하나는 사용자의 입력을 받아 처리하는 것이다. 이는 흔히 <strong>CRUD(Create, Read, Update, Delete)</strong> 작업으로 표현된다.</p>
<ul>
<li><strong>Create:</strong> 사용자의 입력(게시글 작성 등)이 데이터베이스에 저장되는 과정이다.</li>
<li><strong>Read:</strong> 데이터베이스에 저장된 내용을 조회하여 사용자에게 보여주는 과정이다.</li>
<li><strong>Update:</strong> 기존 데이터를 수정하는 과정이다.</li>
<li><strong>Delete:</strong> 기존 데이터를 삭제하는 과정이다.</li>
</ul>
<p>여기서는 사용자의 입력을 받아 새로운 데이터를 생성하는 <strong>Create</strong> 과정에 대해 알아보겠다.</p>
<hr />
<h3 id="1-입력-폼-만들기-뷰-템플릿">1. 입력 폼 만들기 (뷰 템플릿)</h3>
<p>먼저 사용자가 게시글을 작성할 수 있는 입력 폼을 만든다.</p>
<ul>
<li><code>src/main/resources/templates</code> 경로에 <code>articles</code>라는 새로운 <strong>디렉터리를 생성</strong>한다.</li>
<li><code>articles</code> 디렉터리 안에 <strong><code>new.mustache</code></strong> 파일을 만든다. 이 파일은 게시글 작성 페이지의 뷰 템플릿이 된다.</li>
</ul>
<!-- end list -->

<pre><code class="language-html">{{&gt;layouts/header}}

&lt;form class=&quot;container&quot; action=&quot;/articles&quot; method=&quot;post&quot;&gt;
    &lt;div class=&quot;mb-3&quot;&gt;
        &lt;label class=&quot;form-label&quot;&gt;제목&lt;/label&gt;
        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;title&quot;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;mb-3&quot;&gt;
        &lt;label class=&quot;form-label&quot;&gt;내용&lt;/label&gt;
        &lt;textarea class=&quot;form-control&quot; rows=&quot;3&quot; name=&quot;content&quot;&gt;&lt;/textarea&gt;
    &lt;/div&gt;
    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt;
&lt;/form&gt;

{{&gt;layouts/footer}}</code></pre>
<blockquote>
<p><strong>폼 데이터 전송 설정:</strong></p>
<ul>
<li><code>form</code> 태그의 <code>action=&quot;/articles&quot;</code>는 폼 데이터가 <strong>어떤 URL로 전송될지</strong>를 지정한다.</li>
<li><code>form</code> 태그의 <code>method=&quot;post&quot;</code>는 데이터를 <strong>어떤 방식으로 보낼지</strong>를 지정한다. 게시글 생성과 같이 서버에 데이터를 보내 변경을 일으킬 때는 <code>POST</code> 방식을 주로 사용한다.</li>
<li><code>input</code> 태그와 <code>textarea</code> 태그에 <code>name</code> 속성을 추가했다. 이 <code>name</code> 속성(<code>name=&quot;title&quot;</code>, <code>name=&quot;content&quot;</code>)은 <strong>폼 데이터의 이름을 지정</strong>하는 것으로, 컨트롤러에서 이 이름을 이용해 데이터를 받는다.</li>
</ul>
</blockquote>
<hr />
<h3 id="2-dtodata-transfer-object-만들기">2. DTO(Data Transfer Object) 만들기</h3>
<p><strong>DTO</strong>는 **데이터 전송 객체(Data Transfer Object)**의 약자다. 폼 데이터를 비롯한 여러 데이터들을 하나로 묶어 전송하거나 받을 때 사용한다. DTO는 데이터 자체를 담는 용도이므로, 데이터베이스에 직접 접근하는 모델과는 구분된다.</p>
<ul>
<li><code>src/main/java/com.example.firstProject</code> 경로에 <code>controller</code>와 동등한 위치에 <strong><code>dto</code> 패키지를 생성</strong>한다.</li>
<li><code>dto</code> 패키지 안에 <code>ArticleForm</code>이라는 <strong>자바 클래스를 생성</strong>한다.</li>
</ul>
<!-- end list -->

<pre><code class="language-java">// src/main/java/com/example/firstProject/dto/ArticleForm.java
package com.example.firstProject.dto;

public class ArticleForm {
    private String title;
    private String content;

    // 생성자: 폼 데이터를 받을 때 사용
    public ArticleForm(String title, String content) {
        this.title = title;
        this.content = content;
    }

    // toString() 메서드: 객체의 상태를 문자열로 확인하는 용도
    @Override
    public String toString() {
        return &quot;ArticleForm{&quot; +
                &quot;title='&quot; + title + '\'' +
                &quot;, content='&quot; + content + '\'' +
                '}';
    }
}</code></pre>
<blockquote>
<p><strong>DTO의 역할:</strong></p>
<ul>
<li><code>ArticleForm</code> 클래스는 폼에서 넘어오는 <strong><code>title</code>과 <code>content</code> 데이터를 하나로 묶어</strong> 담는 역할을 한다.</li>
<li><code>toString()</code> 메서드는 객체에 담긴 데이터가 제대로 들어왔는지 **확인(디버깅)**하는 데 유용하다.</li>
</ul>
</blockquote>
<hr />
<h3 id="3-컨트롤러에서-폼-데이터-받기">3. 컨트롤러에서 폼 데이터 받기</h3>
<p>이제 컨트롤러가 폼 데이터 전송 요청을 처리하도록 구현한다.</p>
<ul>
<li><code>src/main/java/com.example.firstProject/controller</code> 경로에 <code>ArticleController</code>라는 <strong>클래스를 생성</strong>한다.</li>
</ul>
<!-- end list -->

<pre><code class="language-java">// src/main/java/com/example/firstProject/controller/ArticleController.java
package com.example.firstProject.controller;

import com.example.firstProject.dto.ArticleForm; // DTO 임포트
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;

@Controller
public class ArticleController {

    @GetMapping(&quot;/articles/new&quot;)
    public String newArticleForm() {
        return &quot;articles/new&quot;; // articles/new.mustache 파일을 브라우저로 전송
    }

    @PostMapping(&quot;/articles&quot;)
    public String createArticle(ArticleForm form) {
        // 폼 데이터가 DTO 객체에 담겼는지 확인
        System.out.println(form.toString());

        // 데이터가 잘 들어왔다면 리다이렉트 등으로 다음 페이지로 이동
        return &quot;&quot;;
    }
}</code></pre>
<blockquote>
<p><strong>코드 설명:</strong></p>
<ul>
<li><code>@GetMapping(&quot;/articles/new&quot;)</code>: <code>/articles/new</code> URL로 <strong>접속 요청</strong>이 오면 <code>newArticleForm()</code> 메서드를 실행한다. 이 메서드는 게시글 작성 폼(<code>new.mustache</code>)을 클라이언트에게 보여준다.</li>
<li><code>@PostMapping(&quot;/articles&quot;)</code>: <code>new.mustache</code> 폼에서 <strong><code>Submit</code> 버튼을 눌러 <code>/articles</code> URL로 POST 요청</strong>이 들어오면 <code>createArticle()</code> 메서드를 실행한다.</li>
<li><code>public String createArticle(ArticleForm form)</code>: 스프링은 HTTP 요청으로 들어온 폼 데이터를 <code>ArticleForm</code> 객체에 자동으로 담아준다. 이때, <strong>폼 데이터의 <code>name</code> 속성 이름과 DTO 객체의 필드 이름이 일치</strong>해야 한다.</li>
<li><code>System.out.println(form.toString());</code>: <code>toString()</code> 메서드를 이용해 DTO 객체에 폼 데이터가 제대로 담겼는지 콘솔에서 확인할 수 있다.</li>
</ul>
</blockquote>
<p>이제 애플리케이션을 실행하고 <code>http://localhost:8080/articles/new</code>로 접속하여 게시글 제목과 내용을 입력하고 <code>Submit</code> 버튼을 눌러보자. 서버의 콘솔에 입력한 데이터가 출력되는 것을 확인할 수 있을 거다. 이 과정이 바로 클라이언트로부터 폼 데이터를 받아 DTO 객체에 저장하는 핵심적인 흐름이다.<img alt="" src="https://velog.velcdn.com/images/kdhun-0814/post/53838e4e-832f-406d-881b-5c20231d9173/image.png" /></p>